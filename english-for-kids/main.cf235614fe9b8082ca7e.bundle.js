(()=>{"use strict";const s="main",e="statistics",t="difficult-words",a="train",n="play",r="repeat",o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i,i="./assets/icons/",d=i+"alphabet.png",c=i+"animals.png",l=i+"christmas.png",g=i+"colors.png",m=i+"fairytale.png",u=i+"food.png",h=i+"fruits.png",p=i+"numbers.png",b=i+"vegetables.png",y=i+"main.png",f=i+"statistics.png",w=i+"rs_school_js.svg",C={main:{abc:{id:"alphabet",category:"main",word:"Alphabet",translation:"Алфавит",img:"./assets/images/main/alphabet.png",sound:"./assets/sounds/main/alphabet.mp3"},animals:{id:"animals",category:"main",word:"Animals",translation:"Животные",img:"./assets/images/main/animals.png",sound:"./assets/sounds/main/animals.mp3"},christmas:{id:"christmas",category:"main",word:"Christmas",translation:"Рождество",img:"./assets/images/main/christmas.png",sound:"./assets/sounds/main/christmas.mp3"},colors:{id:"colors",category:"main",word:"Colors",translation:"Цвета",img:"./assets/images/main/colors.png",sound:"./assets/sounds/main/colors.mp3"},fairytale:{id:"fairytale",category:"main",word:"Fairytale",translation:"Сказка",img:"./assets/images/main/fairytale.png",sound:"./assets/sounds/main/fairytale.mp3"},food:{id:"food",category:"main",word:"Food",translation:"Eда",img:"./assets/images/main/food.png",sound:"./assets/sounds/main/food.mp3"},fruits:{id:"fruits",category:"main",word:"Fruits",translation:"Фрукты",img:"./assets/images/main/fruits.png",sound:"./assets/sounds/main/fruits.mp3"},numbers:{id:"numbers",category:"main",word:"Numbers",translation:"Числа",img:"./assets/images/main/numbers.png",sound:"./assets/sounds/main/numbers.mp3"},vegetables:{id:"vegetables",category:"main",word:"Vegetables",translation:"Овощи",img:"./assets/images/main/vegetables.png",sound:"./assets/sounds/main/vegetables.mp3"}},alphabet:{a:{id:"a",category:"alphabet",word:"A",translation:"Эй",img:"./assets/images/alphabet/a.png",sound:"./assets/sounds/alphabet/a.mp3"},b:{id:"b",category:"alphabet",word:"B",translation:"Би",img:"./assets/images/alphabet/b.png",sound:"./assets/sounds/alphabet/b.mp3"},c:{id:"c",category:"alphabet",word:"C",translation:"Си",img:"./assets/images/alphabet/c.png",sound:"./assets/sounds/alphabet/c.mp3"},d:{id:"d",category:"alphabet",word:"D",translation:"Ди",img:"./assets/images/alphabet/d.png",sound:"./assets/sounds/alphabet/d.mp3"},e:{id:"e",category:"alphabet",word:"E",translation:"И",img:"./assets/images/alphabet/e.png",sound:"./assets/sounds/alphabet/e.mp3"},f:{id:"f",category:"alphabet",word:"F",translation:"Эф",img:"./assets/images/alphabet/f.png",sound:"./assets/sounds/alphabet/f.mp3"},g:{id:"g",category:"alphabet",word:"G",translation:"Джи",img:"./assets/images/alphabet/g.png",sound:"./assets/sounds/alphabet/g.mp3"},h:{id:"h",category:"alphabet",word:"H",translation:"Эйч",img:"./assets/images/alphabet/h.png",sound:"./assets/sounds/alphabet/h.mp3"},i:{id:"i",category:"alphabet",word:"I",translation:"Ай",img:"./assets/images/alphabet/i.png",sound:"./assets/sounds/alphabet/i.mp3"},j:{id:"j",category:"alphabet",word:"J",translation:"Джей",img:"./assets/images/alphabet/j.png",sound:"./assets/sounds/alphabet/j.mp3"},k:{id:"k",category:"alphabet",word:"K",translation:"Кей",img:"./assets/images/alphabet/k.png",sound:"./assets/sounds/alphabet/k.mp3"},l:{id:"l",category:"alphabet",word:"L",translation:"Эл",img:"./assets/images/alphabet/l.png",sound:"./assets/sounds/alphabet/l.mp3"},m:{id:"m",category:"alphabet",word:"M",translation:"Эм",img:"./assets/images/alphabet/m.png",sound:"./assets/sounds/alphabet/m.mp3"},n:{id:"n",category:"alphabet",word:"N",translation:"Эн",img:"./assets/images/alphabet/n.png",sound:"./assets/sounds/alphabet/n.mp3"},o:{id:"o",category:"alphabet",word:"O",translation:"Оу",img:"./assets/images/alphabet/o.png",sound:"./assets/sounds/alphabet/o.mp3"},p:{id:"p",category:"alphabet",word:"P",translation:"Пи",img:"./assets/images/alphabet/p.png",sound:"./assets/sounds/alphabet/p.mp3"},q:{id:"q",category:"alphabet",word:"Q",translation:"Кью",img:"./assets/images/alphabet/q.png",sound:"./assets/sounds/alphabet/q.mp3"},r:{id:"r",category:"alphabet",word:"R",translation:"Ар",img:"./assets/images/alphabet/r.png",sound:"./assets/sounds/alphabet/r.mp3"},s:{id:"s",category:"alphabet",word:"S",translation:"Эс",img:"./assets/images/alphabet/s.png",sound:"./assets/sounds/alphabet/s.mp3"},t:{id:"t",category:"alphabet",word:"T",translation:"Ти",img:"./assets/images/alphabet/t.png",sound:"./assets/sounds/alphabet/t.mp3"},u:{id:"u",category:"alphabet",word:"U",translation:"Ю",img:"./assets/images/alphabet/u.png",sound:"./assets/sounds/alphabet/u.mp3"},v:{id:"v",category:"alphabet",word:"V",translation:"Ви",img:"./assets/images/alphabet/v.png",sound:"./assets/sounds/alphabet/v.mp3"},w:{id:"w",category:"alphabet",word:"W",translation:"Дабл-ю",img:"./assets/images/alphabet/w.png",sound:"./assets/sounds/alphabet/w.mp3"},x:{id:"x",category:"alphabet",word:"X",translation:"Экс",img:"./assets/images/alphabet/x.png",sound:"./assets/sounds/alphabet/x.mp3"},y:{id:"y",category:"alphabet",word:"Y",translation:"Уай",img:"./assets/images/alphabet/y.png",sound:"./assets/sounds/alphabet/y.mp3"},z:{id:"z",category:"alphabet",word:"Z",translation:"Зэд",img:"./assets/images/alphabet/z.png",sound:"./assets/sounds/alphabet/z.mp3"}},animals:{bear:{id:"bear",category:"animals",word:"Bear",translation:"Медведь",img:"./assets/images/animals/bear.png",sound:"./assets/sounds/animals/bear.mp3"},cat:{id:"cat",category:"animals",word:"Cat",translation:"Кот",img:"./assets/images/animals/cat.png",sound:"./assets/sounds/animals/cat.mp3"},dog:{id:"dog",category:"animals",word:"Dog",translation:"Собака",img:"./assets/images/animals/dog.png",sound:"./assets/sounds/animals/dog.mp3"},elephant:{id:"elephant",category:"animals",word:"Elephant",translation:"Слон",img:"./assets/images/animals/elephant.png",sound:"./assets/sounds/animals/elephant.mp3"},fox:{id:"fox",category:"animals",word:"Fox",translation:"Лиса",img:"./assets/images/animals/fox.png",sound:"./assets/sounds/animals/fox.mp3"},giraffe:{id:"giraffe",category:"animals",word:"Giraffe",translation:"Жираф",img:"./assets/images/animals/giraffe.png",sound:"./assets/sounds/animals/giraffe.mp3"},lion:{id:"lion",category:"animals",word:"Lion",translation:"Лев",img:"./assets/images/animals/lion.png",sound:"./assets/sounds/animals/lion.mp3"},panda:{id:"panda",category:"animals",word:"Panda",translation:"Панда",img:"./assets/images/animals/panda.png",sound:"./assets/sounds/animals/panda.mp3"}},christmas:{baubel:{id:"baubel",category:"christmas",word:"Baubel",translation:"Шар",img:"./assets/images/christmas/baubel.png",sound:"./assets/sounds/christmas/baubel.mp3"},candyCane:{id:"candyCane",category:"christmas",word:"Candy Cane",translation:"Леденец",img:"./assets/images/christmas/candy-cane.png",sound:"./assets/sounds/christmas/candy-cane.mp3"},christmasStocking:{id:"christmasStocking",category:"christmas",word:"Christmas Stocking",translation:"Рождественский Носок",img:"./assets/images/christmas/christmas-stocking.png",sound:"./assets/sounds/christmas/christmas-stocking.mp3"},christmasTree:{id:"christmasTree",category:"christmas",word:"Christmas Tree",translation:"Рождественская Eлка",img:"./assets/images/christmas/christmas-tree.png",sound:"./assets/sounds/christmas/christmas-tree.mp3"},jingleBells:{id:"jingleBells",category:"christmas",word:"Jingle Bells",translation:"Колокольчики",img:"./assets/images/christmas/jingle-bells.png",sound:"./assets/sounds/christmas/jingle-bells.mp3"},present:{id:"present",category:"christmas",word:"Present",translation:"Подарок",img:"./assets/images/christmas/present.png",sound:"./assets/sounds/christmas/present.mp3"},santaClaus:{id:"santaClaus",category:"christmas",word:"Santa Claus",translation:"Санта Клаус",img:"./assets/images/christmas/santa-claus.png",sound:"./assets/sounds/christmas/santa-claus.mp3"},snowman:{id:"snowman",category:"christmas",word:"Snowman",translation:"Снеговик",img:"./assets/images/christmas/snowman.png",sound:"./assets/sounds/christmas/snowman.mp3"}},colors:{black:{id:"black",category:"colors",word:"Black",translation:"Черный",img:"./assets/images/colors/black.png",sound:"./assets/sounds/colors/black.mp3"},blue:{id:"blue",category:"colors",word:"Blue",translation:"Синий",img:"./assets/images/colors/blue.png",sound:"./assets/sounds/colors/blue.mp3"},brown:{id:"brown",category:"colors",word:"Brown",translation:"Коричневый",img:"./assets/images/colors/brown.png",sound:"./assets/sounds/colors/brown.mp3"},green:{id:"green",category:"colors",word:"Green",translation:"Зеленый",img:"./assets/images/colors/green.png",sound:"./assets/sounds/colors/green.mp3"},orange:{id:"orange",category:"colors",word:"Orange",translation:"Оранжевый",img:"./assets/images/colors/orange.png",sound:"./assets/sounds/colors/orange.mp3"},red:{id:"red",category:"colors",word:"Red",translation:"Красный",img:"./assets/images/colors/red.png",sound:"./assets/sounds/colors/red.mp3"},white:{id:"white",category:"colors",word:"White",translation:"Белый",img:"./assets/images/colors/white.png",sound:"./assets/sounds/colors/white.mp3"},yellow:{id:"yellow",category:"colors",word:"Yellow",translation:"Желтый",img:"./assets/images/colors/yellow.png",sound:"./assets/sounds/colors/yellow.mp3"}},fairytale:{castle:{id:"castle",category:"fairytale",word:"Castle",translation:"Замок",img:"./assets/images/fairytale/castle.png",sound:"./assets/sounds/fairytale/castle.mp3"},dragon:{id:"dragon",category:"fairytale",word:"Dragon",translation:"Дракон",img:"./assets/images/fairytale/dragon.png",sound:"./assets/sounds/fairytale/dragon.mp3"},fairy:{id:"fairy",category:"fairytale",word:"Fairy",translation:"Фея",img:"./assets/images/fairytale/fairy.png",sound:"./assets/sounds/fairytale/fairy.mp3"},king:{id:"king",category:"fairytale",word:"King",translation:"Король",img:"./assets/images/fairytale/king.png",sound:"./assets/sounds/fairytale/king.mp3"},knight:{id:"knight",category:"fairytale",word:"Knight",translation:"Рыцарь",img:"./assets/images/fairytale/knight.png",sound:"./assets/sounds/fairytale/knight.mp3"},mermaid:{id:"mermaid",category:"fairytale",word:"Mermaid",translation:"Русалка",img:"./assets/images/fairytale/mermaid.png",sound:"./assets/sounds/fairytale/mermaid.mp3"},pony:{id:"pony",category:"fairytale",word:"Pony",translation:"Пони",img:"./assets/images/fairytale/pony.png",sound:"./assets/sounds/fairytale/pony.mp3"},witch:{id:"witch",category:"fairytale",word:"witch",translation:"Колдунья",img:"./assets/images/fairytale/witch.png",sound:"./assets/sounds/fairytale/witch.mp3"}},food:{bread:{id:"bread",category:"food",word:"Bread",translation:"Хлеб",img:"./assets/images/food/bread.png",sound:"./assets/sounds/food/bread.mp3"},cake:{id:"cake",category:"food",word:"Cake",translation:"Торт",img:"./assets/images/food/cake.png",sound:"./assets/sounds/food/cake.mp3"},egg:{id:"egg",category:"food",word:"Egg",translation:"Яицо",img:"./assets/images/food/egg.png",sound:"./assets/sounds/food/egg.mp3"},hamburger:{id:"hamburger",category:"food",word:"Hamburger",translation:"Гамбургер",img:"./assets/images/food/hamburger.png",sound:"./assets/sounds/food/hamburger.mp3"},iceCream:{id:"iceCream",category:"food",word:"Ice Cream",translation:"Мороженое",img:"./assets/images/food/ice-cream.png",sound:"./assets/sounds/food/ice-cream.mp3"},milk:{id:"milk",category:"food",word:"Milk",translation:"Молоко",img:"./assets/images/food/milk.png",sound:"./assets/sounds/food/milk.mp3"},pizza:{id:"pizza",category:"food",word:"Pizza",translation:"Пицца",img:"./assets/images/food/pizza.png",sound:"./assets/sounds/food/pizza.mp3"},soup:{id:"soup",category:"food",word:"Soup",translation:"Суп",img:"./assets/images/food/soup.png",sound:"./assets/sounds/food/soup.mp3"}},fruits:{apple:{id:"apple",category:"fruits",word:"Apple",translation:"Яблоко",img:"./assets/images/fruits/apple.png",sound:"./assets/sounds/fruits/apple.mp3"},banana:{id:"banana",category:"fruits",word:"Banana",translation:"Банан",img:"./assets/images/fruits/banana.png",sound:"./assets/sounds/fruits/banana.mp3"},cherry:{id:"cherry",category:"fruits",word:"Cherry",translation:"Вишня",img:"./assets/images/fruits/cherry.png",sound:"./assets/sounds/fruits/cherry.mp3"},lemon:{id:"lemon",category:"fruits",word:"Lemon",translation:"Лимон",img:"./assets/images/fruits/lemon.png",sound:"./assets/sounds/fruits/lemon.mp3"},orange:{id:"orange",category:"fruits",word:"Orange",translation:"Апельсин",img:"./assets/images/fruits/orange.png",sound:"./assets/sounds/fruits/orange.mp3"},pear:{id:"pear",category:"fruits",word:"pear",translation:"Груша",img:"./assets/images/fruits/pear.png",sound:"./assets/sounds/fruits/pear.mp3"},pineapple:{id:"pineapple",category:"fruits",word:"Pineapple",translation:"Ананас",img:"./assets/images/fruits/pineapple.png",sound:"./assets/sounds/fruits/pineapple.mp3"},watermelon:{id:"watermelon",category:"fruits",word:"Watermelon",translation:"Арбуз",img:"./assets/images/fruits/watermelon.png",sound:"./assets/sounds/fruits/watermelon.mp3"}},numbers:{zero:{id:"zero",category:"numbers",word:"Zero",translation:"Ноль",img:"./assets/images/numbers/zero.png",sound:"./assets/sounds/numbers/zero.mp3"},one:{id:"one",category:"numbers",word:"One",translation:"Один",img:"./assets/images/numbers/one.png",sound:"./assets/sounds/numbers/one.mp3"},two:{id:"two",category:"numbers",word:"Two",translation:"Два",img:"./assets/images/numbers/two.png",sound:"./assets/sounds/numbers/two.mp3"},three:{id:"three",category:"numbers",word:"Three",translation:"Три",img:"./assets/images/numbers/three.png",sound:"./assets/sounds/numbers/three.mp3"},four:{id:"four",category:"numbers",word:"Four",translation:"Четыре",img:"./assets/images/numbers/four.png",sound:"./assets/sounds/numbers/four.mp3"},five:{id:"five",category:"numbers",word:"Five",translation:"Пять",img:"./assets/images/numbers/five.png",sound:"./assets/sounds/numbers/five.mp3"},six:{id:"six",category:"numbers",word:"Six",translation:"Шесть",img:"./assets/images/numbers/six.png",sound:"./assets/sounds/numbers/six.mp3"},seven:{id:"seven",category:"numbers",word:"Seven",translation:"Семь",img:"./assets/images/numbers/seven.png",sound:"./assets/sounds/numbers/seven.mp3"},eight:{id:"eight",category:"numbers",word:"Eight",translation:"Восемь",img:"./assets/images/numbers/eight.png",sound:"./assets/sounds/numbers/eight.mp3"},nine:{id:"nine",category:"numbers",word:"Nine",translation:"Девять",img:"./assets/images/numbers/nine.png",sound:"./assets/sounds/numbers/nine.mp3"},ten:{id:"ten",category:"numbers",word:"Ten",translation:"Десять",img:"./assets/images/numbers/ten.png",sound:"./assets/sounds/numbers/ten.mp3"}},vegetables:{beetroot:{id:"beetroot",category:"vegetables",word:"Beetroot",translation:"Свекла",img:"./assets/images/vegetables/beetroot.png",sound:"./assets/sounds/vegetables/beetroot.mp3"},broccoli:{id:"broccoli",category:"vegetables",word:"Broccoli",translation:"Брокколи",img:"./assets/images/vegetables/broccoli.png",sound:"./assets/sounds/vegetables/broccoli.mp3"},carrot:{id:"carrot",category:"vegetables",word:"Carrot",translation:"Морковь",img:"./assets/images/vegetables/carrot.png",sound:"./assets/sounds/vegetables/carrot.mp3"},corn:{id:"corn",category:"vegetables",word:"Corn",translation:"Кукуруза",img:"./assets/images/vegetables/corn.png",sound:"./assets/sounds/vegetables/corn.mp3"},cucumber:{id:"cucumber",category:"vegetables",word:"Cucumber",translation:"Огурец",img:"./assets/images/vegetables/cucumber.png",sound:"./assets/sounds/vegetables/cucumber.mp3"},onion:{id:"onion",category:"vegetables",word:"Onion",translation:"Лук",img:"./assets/images/vegetables/onion.png",sound:"./assets/sounds/vegetables/onion.mp3"},potato:{id:"potato",category:"vegetables",word:"Potato",translation:"Картошка",img:"./assets/images/vegetables/potato.png",sound:"./assets/sounds/vegetables/potato.mp3"},tomato:{id:"tomato",category:"vegetables",word:"Tomato",translation:"Помидор",img:"./assets/images/vegetables/tomato.png",sound:"./assets/sounds/vegetables/tomato.mp3"}}};class S{constructor(s){this.errors=0,this.correctAnswers=0,this.cardsToPlay=s,this.numberOfCards=s.length,this.randomSequenceOfCards=this.generateRandomSequenceOfCards(),this.currentCardIndex=this.randomSequenceOfCards[this.randomSequenceOfCards.length-1],this.currentCardId=this.cardsToPlay[this.currentCardIndex].id}isGameFinished(){return this.correctAnswers===this.numberOfCards}isWinner(){return this.isGameFinished()&&0===this.errors}nextCard(){return this.randomSequenceOfCards.length&&(this.randomSequenceOfCards.pop(),this.currentCardIndex=this.randomSequenceOfCards[this.randomSequenceOfCards.length-1],this.currentCardId=this.cardsToPlay[this.currentCardIndex].id),this.currentCardIndex}generateRandomSequenceOfCards(){const s=new Set;for(;s.size<this.numberOfCards;){const t=(0,e=this.numberOfCards-1,Math.floor(Math.random()*(e-0+1))+0);s.add(t)}var e;return Array.from(s)}}class M{constructor(){this.mainPageContainer=null}render({main:s,gameControls:e},t,a,r){this.mainPageContainer=s,this.mainPageContainer.innerHTML="",e.classList.add("inactive"),Object.values(a).forEach((s=>{const e=document.createElement("div");e.className=t.mainCardClass,r===n?e.classList.add(n):e.classList.remove(n),e.dataset.cardId=""+s.id,e.dataset.cardCategory=""+s.category,e.style.backgroundImage=`url("${s.img}")`,e.textContent=s.word,this.mainPageContainer.appendChild(e)}))}}class v{constructor(){this.categoryPageContainer=null}render({main:s,gameControls:e,gameBtn:t},a,r,o,i){this.categoryPageContainer=s,this.categoryPageContainer.innerHTML="",Object.values(r).forEach((s=>{const r=document.createElement("div");if(r.className=a.categoryCardClass,o===n){r.classList.add(n),e.classList.remove("inactive"),t.classList.remove("repeat");const s=t.children[0];s.textContent="Start Game",i.clearGameStars(),s.classList.remove("repeat")}else r.classList.remove(n),e.classList.add("inactive");r.dataset.cardId=""+s.id,r.dataset.cardCategory=""+s.category;const d=document.createElement("div");d.className=a.categoryCardFrontClass,d.style.backgroundImage=`url("${s.img}")`;const c=document.createElement("i");c.className="rotate";const l=document.createElement("div");l.className=a.categoryCardBackClass,l.style.backgroundImage=`url("${s.img}")`,d.appendChild(c),d.appendChild(document.createTextNode(s.word)),l.appendChild(document.createTextNode(s.translation)),r.appendChild(d),r.appendChild(l),this.categoryPageContainer.appendChild(r)}))}}class O{constructor(){this.statisticsPageContainer=null}render({main:s,gameControls:e},t,a){this.statisticsPageContainer=s,e.classList.add("inactive");const{statisticsButtons:n}=t,{tableStart:r,tableEnd:o}=t.table,{rowStart:i,rowEnd:d}=t.table,{rowHeaderStart:c,rowHeaderEnd:l}=t.table,{dataCellStart:g,dataCellEnd:m}=t.table;let u=1,h="";a.forEach((s=>{h+=i+c+u+l,u+=1,h+=g+s.category+m,h+=g+s.word+m,h+=g+s.translation+m,h+=g+s.trained+m,h+=g+s.correct+m,h+=g+s.errors+m;const e=s.correct/(s.correct+s.errors)*100||0;h+=g+e.toFixed(0)+m,h+=d}));const p=this.statisticsPageContainer.querySelector("#table-body");p?p.innerHTML=h:this.statisticsPageContainer.innerHTML=n+r+h+o}}class D{constructor(){this.difficultWordsPageContainer=null}render({main:s,gameControls:e,gameBtn:t,gameStars:a},n,r,o,i){this.difficultWordsPageContainer=s;const d=new v,{pageTitle:c,sidebarMenu:l}=i.DOM;r.length?d.render({main:s,gameControls:e,gameBtn:t,gameStars:a},n,r,o,i):(this.difficultWordsPageContainer.innerHTML='<h1 class="m-5">No Difficult Words to Repeat</h2>',setTimeout((()=>l.querySelector('[data-category="main"]').click()),1500)),c.textContent="Difficult Words Page",i.changePage("difficult-words"),l.querySelector('[data-category="statistics"]').classList.remove("active")}}const I={gameResultsClass:"game-result container justify-content-center",categoryCardClass:"card m-4 category-page-card",categoryCardFrontClass:"card card-front justify-content-end",categoryCardBackClass:"card card-back justify-content-end",mainCardClass:"card m-4 text-center justify-content-center main-page-card",statisticsButtons:'\n    <button type="button" class="btn btn-lg btn-danger m-3" data-btn="repeat-words">Repeat Difficult Words</button>\n    <button type="button" class="btn btn-lg btn-secondary m-3" data-btn="reset-stats">Reset Statistics</button>\n  ',table:{tableStart:'\n      <div class="table-responsive">\n        <table class="statistics-table table table-sm table-bordered table-hover">\n          <thead class="bg-warning">\n            <tr>\n              <th scope="col">#</th>\n              <th scope="col" class="sort-down" data-category="category" data-sort="sort-down">Category</th>\n              <th scope="col" class="" data-category="word" data-sort="sort-none">Word</th>\n              <th scope="col" class="" data-category="translation" data-sort="sort-none">Translation</th>\n              <th scope="col" class="" data-category="trained" data-sort="sort-none">Trained</th>\n              <th scope="col" class="" data-category="correct" data-sort="sort-none">Correct</th>\n              <th scope="col" class="" data-category="errors" data-sort="sort-none">Errors</th>\n              <th scope="col" class="" data-category="successRate" data-sort="sort-none">%</th>\n            </tr>\n          </thead>\n          <tbody id="table-body">\n    ',tableEnd:"\n          </tbody>\n        </table>\n      </div>    \n    ",rowStart:'\n      <tr class="table-warning">\n    ',rowEnd:"\n      </tr>\n    ",rowHeaderStart:'\n      <th scope="row">\n    ',rowHeaderEnd:"\n      </th>\n    ",dataCellStart:"\n      <td>\n    ",dataCellEnd:"\n      </td>\n    "}};class k{constructor(s){this.cards={},this.sortedCards=[],this.generateStatisticsCards(s)}generateStatisticsCards(s){Object.keys(s).forEach((e=>{"main"!==e&&(this.cards[e]={},Object.keys(s[e]).forEach((t=>{this.cards[e][t]={id:s[e][t].id,word:s[e][t].word,translation:s[e][t].translation,category:e,trained:0,errors:0,correct:0,successRate:0}})))}))}updateStatistics(s,e,t){this.cards[s][e][t]+=1}clearStatistics(s){this.cards={},this.sortedCards=[],this.generateStatisticsCards(s)}toRender(s){return Object.keys(s).forEach((e=>{Object.keys(s[e]).forEach((t=>{this.cards[e][t].errors=s[e][t].errors,this.cards[e][t].correct=s[e][t].correct,this.cards[e][t].trained=s[e][t].trained;const{errors:a,correct:n}=this.cards[e][t],r=n/(n+a)*100||0;this.cards[e][t].successRate=+r.toFixed()}))})),this.cards}toRenderSorted(s,e,t){return this.toRender(s),this.sortedCards=[],Object.keys(this.cards).forEach((s=>{Object.keys(this.cards[s]).forEach((e=>{this.sortedCards.push({...this.cards[s][e]})}))})),this.sortedCards.sort(((s,t)=>"number"==typeof s[e]?t[e]-s[e]:s[e].charCodeAt()-t[e].charCodeAt())),"sort-up"===t&&this.sortedCards.reverse(),this.sortedCards}}class E{constructor(){this.cards=null}getStoredCards(){return localStorage.getItem("eng4kids")?this.cards=JSON.parse(localStorage.getItem("eng4kids")):this.cards={},this.cards}getDifficultWords(){let s=[];const e=(s,e)=>s/(s+e)*100||0;return Object.keys(this.getStoredCards()).forEach((t=>{Object.keys(this.cards[t]).forEach((a=>{const{correct:n,errors:r,img:o,sound:i,translation:d}=this.cards[t][a];s.push({category:t,id:a,word:a,translation:d,successRate:e(n,r),errors:r,img:o,sound:i})}))})),s=s.filter((s=>{const e=s.successRate>0&&s.successRate<100,t=0===s.successRate&&s.errors;return e||t})),s.sort(((s,e)=>{const t=s.successRate-e.successRate;return 0===t?e.errors-s.errors:t})),s.slice(0,8)}updateStoreCard(s,e,t){this.getStoredCards(),this.cards[s]||(this.cards[s]={}),this.cards[s][e]||(this.cards[s][e]={id:C[s][e].id,word:C[s][e].word,translation:C[s][e].translation,img:C[s][e].img,sound:C[s][e].sound,category:s,trained:0,errors:0,correct:0}),this.cards[s][e][t]+=1,localStorage.setItem("eng4kids",JSON.stringify(this.cards))}clearStoredStatistics(){this.cards=null,localStorage.removeItem("eng4kids")}}const L="./assets/sounds/",T={errorSound:new Audio(L+"error.mp3"),correctSound:new Audio(L+"correct.mp3"),successSound:new Audio(L+"success.mp3"),failureSound:new Audio(L+"failure.mp3")},B=new class{constructor(){this.page=s,this.mode=a,this.newGame=null,this.gameIsStarted=!1,this.DOM={},this.gameStatistics=new k(C),this.storedStatistics=new E,this.currentCard=null}initDOMElements(){this.DOM.alphabetIcon=document.getElementById("alphabet-icon"),this.DOM.alphabetIcon.style.backgroundImage=`url("${d}")`,this.DOM.animalsIcon=document.getElementById("animals-icon"),this.DOM.animalsIcon.style.backgroundImage=`url("${c}")`,this.DOM.christmasIcon=document.getElementById("christmas-icon"),this.DOM.christmasIcon.style.backgroundImage=`url("${l}")`,this.DOM.colorsIcon=document.getElementById("colors-icon"),this.DOM.colorsIcon.style.backgroundImage=`url("${g}")`,this.DOM.fairytaleIcon=document.getElementById("fairytale-icon"),this.DOM.fairytaleIcon.style.backgroundImage=`url("${m}")`,this.DOM.foodIcon=document.getElementById("food-icon"),this.DOM.foodIcon.style.backgroundImage=`url("${u}")`,this.DOM.fruitsIcon=document.getElementById("fruits-icon"),this.DOM.fruitsIcon.style.backgroundImage=`url("${h}")`,this.DOM.numbersIcon=document.getElementById("numbers-icon"),this.DOM.numbersIcon.style.backgroundImage=`url("${p}")`,this.DOM.vegetablesIcon=document.getElementById("vegetables-icon"),this.DOM.vegetablesIcon.style.backgroundImage=`url("${b}")`,this.DOM.mainIcon=document.getElementById("main-icon"),this.DOM.mainIcon.style.backgroundImage=`url("${y}")`,this.DOM.statisticsIcon=document.getElementById("statistics-icon"),this.DOM.statisticsIcon.style.backgroundImage=`url("${f}")`,this.DOM.rsSchoolIcon=document.getElementById("rsschool-icon"),this.DOM.rsSchoolIcon.style.backgroundImage=`url("${w}")`,this.DOM.overlay=document.getElementById("overlay"),this.DOM.sidebarToggler=document.getElementById("openSidebarMenu"),this.DOM.sidebarMenu=document.getElementById("sidebarMenu"),this.DOM.sidebarMenuList=document.querySelector(".sidebarMenuInner"),this.DOM.pageTitle=document.getElementById("page-title"),this.DOM.modeToggler=document.getElementById("toggle--knob"),this.DOM.divModeToggler=document.getElementById("div-mode-toggler"),this.DOM.header=document.querySelector("header"),this.DOM.main=document.querySelector("main"),this.DOM.gameControls=document.getElementById("game-controls"),this.DOM.gameBtn=document.getElementById("game-btn"),this.DOM.gameStars=document.getElementById("game-stars")}changePage(s){this.page=s}clearGameState(){this.gameIsStarted=!1,this.newGame=null}clearGameStars(){this.DOM.gameStars.innerHTML=""}clickHandler({target:t}){if(this.page===e)return void this.clickHandlerStatisticsPage(t);if(this.page!==s&&this.mode===n&&!this.gameIsStarted)return;if(this.mode===n&&this.gameIsStarted&&this.clickHandlerCategoryPagePlayMode(t),"I"===t.tagName)return void this.clickHandlerCategoryPageTrainMode(t);const a=t,r=a.dataset.cardId||a.parentElement.dataset.cardId,o=a.dataset.cardCategory||a.parentElement.dataset.cardCategory;if(r)if(this.page===s){this.page=r;const s=this.page;this.DOM.pageTitle.textContent=s+" Page",[...this.DOM.sidebarMenuList.children].forEach((e=>{e.dataset.category===s?e.classList.add("active"):e.classList.remove("active")})),this.start()}else{if(this.mode===n||a.classList.contains("card-back"))return;this.gameStatistics.updateStatistics(o,r,"trained"),this.storedStatistics.updateStoreCard(o,r,"trained"),new Audio(C[o][r].sound).play()}}clickHandlerCategoryPagePlayMode(s){const e=s.parentElement;if(!e.dataset.cardId||e.classList.contains("inactive"))return;const t=e.dataset.cardId,a=e.dataset.cardCategory;if(t===this.newGame.currentCardId){this.newGame.correctAnswers+=1,this.gameStatistics.updateStatistics(a,t,"correct"),this.storedStatistics.updateStoreCard(a,t,"correct");const s=document.createElement("div");s.className="star star-correct",this.DOM.gameStars.appendChild(s),e.classList.add("inactive"),this.newGame.randomSequenceOfCards.length>1?(this.newGame.nextCard(),T.correctSound.play(),T.correctSound.onended=()=>{const s=this.newGame.currentCardIndex,{id:e,category:t}=this.newGame.cardsToPlay[s];new Audio(C[t][e].sound).play()}):this.showGameResult()}else{this.newGame.errors+=1,this.gameStatistics.updateStatistics(a,t,"errors"),this.storedStatistics.updateStoreCard(a,t,"errors");const s=document.createElement("div");s.className="star star-error",this.DOM.gameStars.appendChild(s),T.errorSound.play()}}clickHandlerCategoryPageTrainMode(s){const e=s;if(e.style.transform){const s=+e.style.transform.match(/\d+/);e.style.transform=`rotate(${s+180}deg)`}else e.style.transform="rotate(180deg)";const{cardId:t,cardCategory:a}=s.parentElement.parentElement.dataset;this.gameStatistics.updateStatistics(a,t,"trained"),this.storedStatistics.updateStoreCard(a,t,"trained"),this.rotateCard(s.parentElement.parentElement)}clickHandlerStatisticsPage(s){if(s.dataset.sort){const e=this.reRenderStatisticsTableHeader(s),t=s.dataset.category,a=new O,n=this.storedStatistics.getStoredCards(),r=this.gameStatistics.toRenderSorted(n,t,e);a.render(this.DOM,I,r)}if(s.dataset.btn)if("reset-stats"===s.dataset.btn){this.gameStatistics.clearStatistics(C),this.storedStatistics.clearStoredStatistics();const s=new O,e=this.gameStatistics.toRenderSorted(this.storedStatistics.getStoredCards(),"category","sort-down");s.render(this.DOM,I,e),this.reRenderStatisticsTableHeader()}else"repeat-words"===s.dataset.btn&&(new D).render(this.DOM,I,this.storedStatistics.getDifficultWords(),this.mode,this)}gameHandler(){if(this.DOM.gameBtn.classList.contains(r)){const s=this.newGame.currentCardIndex,{id:e,category:t}=this.newGame.cardsToPlay[s];new Audio(C[t][e].sound).play()}else{this.DOM.gameBtn.classList.add(r);const s=this.DOM.gameBtn.children[0];s.textContent="Repeat",s.classList.add(r),this.gameIsStarted=!0,this.page===t?this.newGame=new S(Object.values(this.storedStatistics.getDifficultWords())):this.newGame=new S(Object.values(C[this.page]));const e=this.newGame.currentCardIndex,{id:a,category:n}=this.newGame.cardsToPlay[e];new Audio(C[n][a].sound).play()}}modeHandler({target:r}){this.mode=r.checked?n:a,this.page!==e&&"repeat"!==this.page&&(this.page===s?(new M).render(this.DOM,I,C[this.page],this.mode):this.page===t?(new D).render(this.DOM,I,this.storedStatistics.getDifficultWords(),this.mode,this):(new v).render(this.DOM,I,C[this.page],this.mode,this))}overlayHandler(){this.DOM.sidebarToggler.checked=!1,this.DOM.sidebarMenu.classList.remove("open"),this.DOM.overlay.style.display="none"}sidebarMenuListHandler({target:s}){if(s.dataset.category){const{category:e}=s.dataset;this.page=e}else if(s.parentElement.dataset.category){const{category:e}=s.parentElement.dataset;this.page=e}this.overlayHandler();const e=this.page;this.DOM.pageTitle.textContent=e+" Page",[...this.DOM.sidebarMenuList.children].forEach((s=>{s.dataset.category===e?s.classList.add("active"):s.classList.remove("active")})),this.start(),this.clearGameState()}showGameResult(){this.DOM.main.innerHTML="",this.DOM.gameControls.classList.add("inactive"),this.DOM.divModeToggler.classList.remove("active");const e=document.createElement("div");if(e.className=I.gameResultsClass,this.newGame.isWinner()){const t=document.createElement("div");t.className="game success mb-4";const a=document.createElement("div");a.className="text mt-4",a.textContent="You Win!",e.appendChild(a),e.appendChild(t),T.successSound.play(),T.successSound.onended=()=>{this.page=s,this.clearGameState(),this.DOM.sidebarMenuList.children[0].click(),this.DOM.divModeToggler.classList.add("active")}}else{const t=document.createElement("div");t.className="game failure mb-4";const a=document.createElement("div");a.className="text mt-4",a.innerHTML=`Try One More Time!<br>You Made ${this.newGame.errors} Mistake(s)!`,e.appendChild(a),e.appendChild(t),T.failureSound.play(),T.failureSound.onended=()=>{this.page=s,this.clearGameState(),this.DOM.sidebarMenuList.children[0].click(),this.DOM.divModeToggler.classList.add("active")}}this.DOM.main.appendChild(e)}reRenderStatisticsTableHeader(s){let e,t=s;const a="sort-up",n="sort-down";return t?e=t.dataset.sort:(t=this.DOM.main.querySelector('[data-category="category"]'),e=a),[...t.parentElement.children].forEach((s=>{s.setAttribute("class","")})),"sort-none"===e||e===a?(t.classList.remove(a),e=n,t.classList.add(e)):(t.classList.remove(n),e=a,t.classList.add(e)),t.dataset.sort=e,e}rotateCard(s){this.currentCard=s,this.currentCard.style.transform="rotateY(180deg)",this.currentCard.children[1].onmouseleave||(this.currentCard.children[1].onmouseleave=()=>{this.currentCard.style.transform="rotateY(0deg)"}),setTimeout((()=>{this.currentCard.matches(":hover")&&!o.test(navigator.userAgent)||(this.currentCard.style.transform="rotateY(0deg)")}),750)}start(){if(this.DOM.main.innerHTML="",this.page===s)(new M).render(this.DOM,I,C[this.page],this.mode);else if(this.page===e){const s=new O,e=this.gameStatistics.toRenderSorted(this.storedStatistics.getStoredCards(),"category","sort-down");s.render(this.DOM,I,e)}else(new v).render(this.DOM,I,C[this.page],this.mode,this)}toggleSidebar(){this.DOM.sidebarToggler.checked?(this.DOM.sidebarMenu.classList.add("open"),this.DOM.overlay.style.display="block"):(this.DOM.sidebarMenu.classList.remove("open"),this.DOM.overlay.style.display="none")}};B.initDOMElements(),B.DOM.sidebarToggler.addEventListener("click",B.toggleSidebar.bind(B)),B.DOM.overlay.addEventListener("click",B.overlayHandler.bind(B)),B.DOM.sidebarMenuList.addEventListener("click",B.sidebarMenuListHandler.bind(B)),B.DOM.modeToggler.addEventListener("click",B.modeHandler.bind(B)),B.DOM.main.addEventListener("click",B.clickHandler.bind(B)),B.DOM.gameBtn.addEventListener("click",B.gameHandler.bind(B)),B.start()})();